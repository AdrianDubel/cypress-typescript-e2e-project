name: Cypress Tests
on: [push]
jobs:
 Cypress-Test:
   runs-on: ubuntu-latest
    env:
      USERNAME: ${{ secrets.CYPRESS_USERNAME }}
      PASSWORD: ${{ secrets.CYPRESS_PASSWORD }}
   steps:
     - name: Checkout GitCode
       uses: actions/checkout@v2
 
     - name: Install dependencies
       run: npm install

     - name: Start Local Server
       run: npx http-server -p 9000 &
      #  background: true 

     - name: Wait for Server to Start
       run: sleep 5 

     - name: Run Cypress Test
       uses: cypress-io/github-action@v4
       with:
         command: npx cypress run --browser chrome
         env:
            USERNAME: ${{ env.USERNAME }}
            PASSWORD: ${{ env.PASSWORD }}
